{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/respuesta-cuestionario.service\";\nimport * as i2 from \"src/app/services/cuestionario.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../../../../shared/loading/loading.component\";\nfunction PreguntaComponent_app_loading_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-loading\");\n  }\n}\nfunction PreguntaComponent_div_3_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 8);\n    i0.ɵɵlistener(\"click\", function PreguntaComponent_div_3_li_4_Template_li_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r5);\n      const respuesta_r3 = restoredCtx.$implicit;\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.respuestaSeleccionada(respuesta_r3, respuesta_r3.id));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const respuesta_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"ngClass\", ctx_r2.AddClassOption(respuesta_r3));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", respuesta_r3.descripcion, \" \");\n  }\n}\nfunction PreguntaComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"h4\", 3);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ul\", 4);\n    i0.ɵɵtemplate(4, PreguntaComponent_div_3_li_4_Template, 2, 2, \"li\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"div\", 6)(6, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function PreguntaComponent_div_3_Template_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.siguiente());\n    });\n    i0.ɵɵtext(7, \"SIGUIENTE\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.obtenerPregunta());\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.listPreguntas[ctx_r1.getIndex()].listRespuestas);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r1.rtaConfirmada);\n  }\n}\nlet PreguntaComponent = /*#__PURE__*/(() => {\n  class PreguntaComponent {\n    constructor(respuestaCuestionarioService, cuestionarioService, router) {\n      this.respuestaCuestionarioService = respuestaCuestionarioService;\n      this.cuestionarioService = cuestionarioService;\n      this.router = router;\n      this.listPreguntas = [];\n      this.loading = false;\n      this.rtaConfirmada = false;\n      this.index = 0;\n      this.listRespuestaDetalle = [];\n    }\n    ngOnInit() {\n      this.idCuestionario = this.respuestaCuestionarioService.idCuestionario;\n      if (this.idCuestionario == null) {\n        this.router.navigate(['/inicio']);\n        return;\n      }\n      this.getCuestionario();\n      this.respuestaCuestionarioService.respuestas = [];\n    }\n    getCuestionario() {\n      this.loading = true;\n      this.cuestionarioService.getCuestionario(this.idCuestionario).subscribe(data => {\n        this.listPreguntas = data.listPreguntas;\n        this.loading = false;\n        this.respuestaCuestionarioService.cuestionario = data;\n      });\n    }\n    obtenerPregunta() {\n      return this.listPreguntas[this.index].descripcion;\n    }\n    getIndex() {\n      return this.index;\n    }\n    respuestaSeleccionada(respuesta, idRespuesta) {\n      this.opcionSeleccionada = respuesta;\n      this.rtaConfirmada = true;\n      this.idRespuestaSeleccionada = idRespuesta;\n    }\n    AddClassOption(respuesta) {\n      if (respuesta === this.opcionSeleccionada) {\n        return 'active text-light';\n      }\n    }\n    siguiente() {\n      this.respuestaCuestionarioService.respuestas.push(this.idRespuestaSeleccionada);\n      // Creamos un objeto RespuestaDetalle \n      const detalleRespuesta = {\n        respuestaId: this.idRespuestaSeleccionada\n      };\n      // Agregamos objeto al array\n      this.listRespuestaDetalle.push(detalleRespuesta);\n      if (this.index === this.listPreguntas.length - 1) {\n        /*  this.router.navigate(['/inicio/respuestaCuestionario']); */\n        this.guardarRespuestaCuestionario();\n      }\n      this.rtaConfirmada = false;\n      this.index++;\n      this.idRespuestaSeleccionada = null;\n    }\n    guardarRespuestaCuestionario() {\n      const rtaCuestionario = {\n        cuestionarioId: this.respuestaCuestionarioService.idCuestionario,\n        nombreParticipante: this.respuestaCuestionarioService.nombreParticiante,\n        listRtaCuestionarioDetalle: this.listRespuestaDetalle\n      };\n      this.loading = true;\n      this.respuestaCuestionarioService.guardarRespuestaCuestionario(rtaCuestionario).subscribe(data => {\n        this.loading = false;\n        this.router.navigate(['/inicio/listCuestionarios/respuestaCuestionario']);\n      }, error => {\n        this.loading = false;\n        console.log(error);\n      });\n    }\n  }\n  PreguntaComponent.ɵfac = function PreguntaComponent_Factory(t) {\n    return new (t || PreguntaComponent)(i0.ɵɵdirectiveInject(i1.RespuestaCuestionarioService), i0.ɵɵdirectiveInject(i2.CuestionarioService), i0.ɵɵdirectiveInject(i3.Router));\n  };\n  PreguntaComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PreguntaComponent,\n    selectors: [[\"app-pregunta\"]],\n    decls: 4,\n    vars: 2,\n    consts: [[1, \"container\"], [1, \"card\", \"text-center\"], [4, \"ngIf\"], [1, \"card-title\"], [1, \"list-group\"], [\"class\", \"list-group-item\", 3, \"ngClass\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"mt-auto\"], [1, \"btn\", \"btn-primary\", \"btn-lg\", \"btn-sig\", 3, \"disabled\", \"click\"], [1, \"list-group-item\", 3, \"ngClass\", \"click\"]],\n    template: function PreguntaComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtemplate(2, PreguntaComponent_app_loading_2_Template, 1, 0, \"app-loading\", 2);\n        i0.ɵɵtemplate(3, PreguntaComponent_div_3_Template, 8, 3, \"div\", 2);\n        i0.ɵɵelementEnd()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngIf\", ctx.loading);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.listPreguntas.length > 0);\n      }\n    },\n    dependencies: [i4.NgClass, i4.NgForOf, i4.NgIf, i5.LoadingComponent],\n    styles: [\".container[_ngcontent-%COMP%]{min-height:100vh;display:flex;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]{padding:20px;width:100%}.btn-sig[_ngcontent-%COMP%]{background-color:#f04f44;border-color:#f04f44;margin-bottom:20px;margin-top:20px}.list-group-item[_ngcontent-%COMP%]{cursor:pointer}\"]\n  });\n  return PreguntaComponent;\n})();\nexport { PreguntaComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}